<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel="shortcut icon" href=https://peregrinator.site/favicon.ico><link rel=stylesheet href=/css/style.min.css><link rel=canonical href=https://peregrinator.site/blog/2023/02/blog-revamp-and-starting-to-understand-hugo-better/><title>Blog revamp and starting to understand Hugo better</title>
<meta property="og:title" content="Blog revamp and starting to understand Hugo better"><meta property="og:type" content="article"><meta property="og:url" content="https://peregrinator.site/blog/2023/02/blog-revamp-and-starting-to-understand-hugo-better/"><meta property="og:image" content="/images/avatar.jpg"><meta property="og:description" content><meta property="og:image:alt" content="A silhoutte of a Shaheen falcon"><meta name=fediverse:creator content="@peregrinator@hachyderm.io"><div style=color:transparent><a rel=me href=https://hachyderm.io/@peregrinator></a><a rel=me href=https://lemmy.ml/@peregrinator></a></div><link rel=alternate type=application/rss+xml href=https://peregrinator.site//index.xml title="peregrinator's blog"></head><body><header id=banner><h2><a href=https://peregrinator.site/>peregrinator's blog</a></h2><nav><ul><li><a href=/about/ title="about me">about</a></li><li><a href=/fiction/ title=fiction>fiction</a></li></ul></nav></header><main id=content><article><header id=post-header><h1>Blog revamp and starting to understand Hugo better</h1><div><time>23.02.2023</time></div></header><div class=info><p>This article is part of the <a href=/series/blogging-with-emacs>Blogging with Emacs</a> series.</p></div><p>I&rsquo;d decided to make the switch to a blogging workflow that I could use
with Emacs back in December and <a href=/blog/2022/12/hugo-org-and-starting-over-at-a-new-blog.html>wrote about</a> setting it up from
scratch. Since I wasn&rsquo;t yet acquainted with writing original layout
templates, style-sheets or with organising content into sections in as
simple and sane a manner as I wanted to, I&rsquo;d settled for outsourcing
most of this to a fairly <a href=https:/github.com/LukasJoswiak/etch>basic theme</a>. Over time, I grew dissatisfied
with how the site looked and how it organised my content and so I
spent some time customising the theme, which took a while to figure
out. I wasn&rsquo;t happy with it still. I then tried changing themes a few
times but couldn&rsquo;t find anything that really worked for me. That I
didn&rsquo;t want any JavaScript I didn&rsquo;t understand, or could understand
for that matter, effectively eliminated a lot of the options I had
considered.</p><p>It then dawned on me that I could maybe attempt writing a theme for
myself from (nearly) scratch when I found two themes that seemed to
check out most of my requirements. The first of these was <a href=https://github.com/mavidser/hugo-rocinante/>rocinante</a> by
<a href=https://github.com/mavidser>Sid Verma</a>, a great and adequately minimal theme with added support for
photo albums as posts. My only qualms with it were the somewhat messy
style sheets and cryptic templates that made personalising a bit of an
ordeal. The second, however, was simply genius and it took me close to
no time to figure it out, despite thinking it to be too advanced for
me — there was no theme sub-module and everything was in the home
directory it was from somebody&rsquo;s personal website.</p><p>Needless to say, it was Drew DeVault&rsquo;s and I&rsquo;d seen it as something of
an inspiration from the start. A quick glance at <a href=https://drewdevault.com>Drew Devault&rsquo;s blog</a>
should convey what I mean by minimal and functional. I jumped right
into a local clone of his <a href=https://git.sr.ht/~sircmpwn/drewdevault.com>sourcehut repo</a> and got down to making it my
own. I added some minor spice to the `single.html` layout under `blog`
and made an additional few for</p><ol><li>posts from my Wordpress blog I didn&rsquo;t want listed on the homepage</li><li>a section index that listed the above</li><li>fiction (just the one post)</li><li>an <em>About me</em> page (not a section, unlike before)</li><li>the browser friendly copy of my <a href=/emacs/literate_emacs_configuration.html>Literate Emacs Configuration</a> with
a table of contents in the sidebar and heading anchors.</li></ol><p>I realised I didn&rsquo;t want unnecessary taxonomy pages like before or
like those from the rocinante theme and that all my regular blog
posts, Emacs configuration and fiction on the homepage. The prospect
of having to write descriptions for each of these — had I maintained
separate sections for each like before — was daunting, to say the
least.</p><p>I also loved the idea of displaying &ldquo;featured posts&rdquo; from the blogs I
follow through Drew&rsquo;s own <a href=https://git.sr.ht/~sircmpwn/openring>openring</a>, written in Go. The only issue I
encountered was with adding this to the Github actions workflows since
it&rsquo;s not as straightforward as the one Sourcehut uses and the absurdly
large number of modules is mind-boggling. Until I find a way of
getting this automated, I&rsquo;ll have to keep at running the command
manually every few days before committing/pushing changes.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>
</span></span><span class=line><span class=cl>openring <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    -s https://drewdevault.com/blog/index.xml <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    -s https://sourcehut.org/blog/index.xml <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    -s https://ambikamath.com/feed/ <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    &lt; webring-in.template <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    &gt; layouts/partials/webring-out.html
</span></span></code></pre></div><p>There were also some issues with date handling in the ox-hugo setup
and I ended up rewriting the org-capture template to allow for entries
into both the main blog section and the miscellaneous one. The capture
template now looks like this:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>with-eval-after-load</span> <span class=ss>&#39;org-capture</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nb>defun</span> <span class=nv>org-hugo-new-post-capture</span> <span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;Returns </span><span class=ss>`org-capture&#39;</span><span class=s> template string for new Hugo post.
</span></span></span><span class=line><span class=cl><span class=s>See </span><span class=ss>`org-capture-templates&#39;</span><span class=s> for more information.&#34;</span>
</span></span><span class=line><span class=cl>    <span class=p>(</span><span class=nb>let*</span> <span class=p>(</span><span class=c1>;; http://www.holgerschurig.de/en/emacs-blog-from-org-to-hugo/</span>
</span></span><span class=line><span class=cl>           <span class=p>(</span><span class=nv>date</span> <span class=p>(</span><span class=nf>format-time-string</span> <span class=p>(</span><span class=nv>org-time-stamp-format</span> <span class=nb>:long</span> <span class=nb>:inactive</span><span class=p>)</span> <span class=p>(</span><span class=nv>org-current-time</span><span class=p>)))</span>
</span></span><span class=line><span class=cl>           <span class=p>(</span><span class=nv>title</span> <span class=p>(</span><span class=nf>read-from-minibuffer</span> <span class=s>&#34;Post Title: &#34;</span><span class=p>))</span> <span class=c1>;Prompt to enter the post title</span>
</span></span><span class=line><span class=cl>           <span class=p>(</span><span class=nv>fname</span> <span class=p>(</span><span class=nv>org-hugo-slug</span> <span class=nv>title</span><span class=p>))</span>
</span></span><span class=line><span class=cl>           <span class=p>(</span><span class=nv>section</span> <span class=p>(</span><span class=nf>plist-get</span> <span class=nv>org-capture-plist</span> <span class=nb>:section</span><span class=p>))</span>
</span></span><span class=line><span class=cl>           <span class=p>(</span><span class=nv>lastmod</span> <span class=p>(</span><span class=nf>plist-get</span> <span class=nv>org-capture-alist</span> <span class=nb>:lastmod</span><span class=p>)))</span>
</span></span><span class=line><span class=cl>      <span class=p>(</span><span class=nf>mapconcat</span> <span class=nf>#&#39;identity</span>
</span></span><span class=line><span class=cl>                 <span class=o>`</span><span class=p>(</span>
</span></span><span class=line><span class=cl>                   <span class=o>,</span><span class=p>(</span><span class=nf>concat</span> <span class=s>&#34;* DRAFT &#34;</span> <span class=nv>title</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                   <span class=s>&#34;:PROPERTIES:&#34;</span>
</span></span><span class=line><span class=cl>                   <span class=o>,</span><span class=p>(</span><span class=nf>concat</span> <span class=s>&#34;&#34;</span> <span class=nv>section</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                   <span class=o>,</span><span class=p>(</span><span class=nf>concat</span> <span class=s>&#34;:EXPORT_FILE_NAME: &#34;</span> <span class=nv>fname</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                   <span class=o>,</span><span class=p>(</span><span class=nf>concat</span> <span class=s>&#34;:EXPORT_HUGO_AUTO_SET_LASTMOD: &#34;</span> <span class=nv>lastmod</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                   <span class=c1>;; Enter current date and time</span>
</span></span><span class=line><span class=cl>                   <span class=o>,</span><span class=p>(</span><span class=nf>concat</span> <span class=s>&#34;:EXPORT_DATE: &#34;</span> <span class=nv>date</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                   <span class=s>&#34;:END:&#34;</span>
</span></span><span class=line><span class=cl>                   <span class=c1>;; Place the cursor here finally</span>
</span></span><span class=line><span class=cl>                   <span class=s>&#34;%?\n&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                 <span class=s>&#34;\n&#34;</span><span class=p>)))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nb>setq</span> <span class=nv>org-capture-templates</span>
</span></span><span class=line><span class=cl>        <span class=c1>;;`org-capture&#39; binding + h</span>
</span></span><span class=line><span class=cl>        <span class=o>&#39;</span><span class=p>((</span><span class=s>&#34;h&#34;</span>
</span></span><span class=line><span class=cl>           <span class=s>&#34;Hugo blog post&#34;</span>
</span></span><span class=line><span class=cl>           <span class=nv>entry</span>
</span></span><span class=line><span class=cl>           <span class=p>(</span><span class=nv>file+olp</span> <span class=s>&#34;~/my_gits/brihadeesh.github.io/content-org/blog/posts.org&#34;</span> <span class=s>&#34;Posts&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>           <span class=p>(</span><span class=nb>function</span> <span class=nv>org-hugo-new-post-capture</span><span class=p>)</span>
</span></span><span class=line><span class=cl>           <span class=nb>:section</span> <span class=s>&#34;:EXPORT_HUGO_SECTION: blog&#34;</span>
</span></span><span class=line><span class=cl>           <span class=nb>:lastmod</span> <span class=s>&#34;t&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>          <span class=c1>;; `org-capture&#39; binding + m</span>
</span></span><span class=line><span class=cl>          <span class=p>(</span><span class=s>&#34;m&#34;</span>
</span></span><span class=line><span class=cl>           <span class=s>&#34;Hugo miscellaneous blog post&#34;</span>
</span></span><span class=line><span class=cl>           <span class=nv>entry</span>
</span></span><span class=line><span class=cl>           <span class=p>(</span><span class=nv>file+olp</span> <span class=s>&#34;~/my_gits/brihadeesh.github.io/content-org/blog/posts.org&#34;</span> <span class=s>&#34;Miscellaneous&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>           <span class=p>(</span><span class=nb>function</span> <span class=nv>org-hugo-new-post-capture</span><span class=p>)</span>
</span></span><span class=line><span class=cl>           <span class=nb>:section</span> <span class=s>&#34;:EXPORT_HUGO_SECTION: misc&#34;</span>
</span></span><span class=line><span class=cl>           <span class=nb>:lastmod</span> <span class=s>&#34;f&#34;</span><span class=p>))))</span>
</span></span></code></pre></div><p>That&rsquo;s about it for now. I deliberately kept this brief and avoided
discussing a bunch of tangential points like design choices and the
&ldquo;criteria&rdquo; for making this the best starting point for my blog. I&rsquo;ll
perhaps cover those in later articles.</p><br></article><section class=comments><h4>post a comment to my <a href="mailto:~peregrinator/public_inbox@lists.sr.ht?subject=Re%3a%20Blog%20revamp%20and%20starting%20to%20understand%20Hugo%20better">public inbox</a></h4><br></section><section><div><hr class="border-dotted border-neutral-300 dark:border-neutral-600"><section class=webring><h3>Articles from blogs I read</h3><small>Generated with
<a class=font-semibold href=https://git.sr.ht/~sircmpwn/openring>openring</a></small><section class=articles><div class=article><h4 class=title><a class=font-semibold href=https://www.sleepingvillagereviews.com/reviews--premieres/negative-bliss-lovesong-mini-review target=_blank rel=noopener>NEGATIVE BLISS - Lovesong (Mini-Review)</a></h4><p class=summary>In a continuing attempt to cover more music that would all-too-oft slip through the very large cracks, we slumbering scribes are making an effort to publish short reviews at a greater frequency, thereby shining our very small spotlight on more cool shit. …</p><small>via <a href=https://www.sleepingvillagereviews.com/reviews--premieres>Sleeping Village Reviews - REVIEWS & PREMIERES</a><br><time datetime="2025-03-08 16:08:34 +0000 GMT">08.03.2025</time></small></div><div class=article><h4 class=title><a class=font-semibold href="https://noobheavy.com/album-review-ingrown-idaho/?utm_source=rss&amp;utm_medium=rss&amp;utm_campaign=album-review-ingrown-idaho" target=_blank rel=noopener>Album Review: Ingrown – “Idaho” (Metallic Hardcore)</a></h4><p class=summary>Written by Ellis Ingrown – Idaho> Metallic hardcore> Idaho, US> Releasing March 7> Closed Casket Activities Right, this album throws together a load of the meanest bits of hardcore, thrash, death metal and powerviolence and [...]
The post Album…</p><small>via <a href=https://noobheavy.com/>Noob Heavy</a><br><time datetime="2025-03-06 22:19:52 +0000 +0000">06.03.2025</time></small></div><div class=article><h4 class=title><a class=font-semibold href=https://ambikamath.com/2025/03/05/six-days-to-launch/ target=_blank rel=noopener>Six Days to Launch!</a></h4><p class=summary>Feminism in the Wild will be on sale in SIX DAYS! I can’t believe it. People I’ve never met or interacted with have already been reading this book that, until now, has felt so closely held in my own circles and communities. Soon, there’ll hopefully be man…</p><small>via <a href=https://ambikamath.com>Ambika Kamath</a><br><time datetime="2025-03-05 14:48:56 +0000 +0000">05.03.2025</time></small></div></section></section><br><hr></div></section></main><footer id=social><nav><ul><li><a href=https://emacs.peregrinator.site title=Emacs>emacs</a></li><li><a href=https://bsky.app/profile/peregrinator.site title>Bluesky</a></li><li><a href=https://lists.sr.ht/~peregrinator/public_inbox title>public inbox</a></li><li><a href=https://git.sr.ht/~peregrinator title>Sourcehut</a></li><li><a href=https://www.buymeacoffee.com/peregrinator title>buymeacoffee</a></li></ul></nav></footer><footer id=footer><div class=copyright>The content for this site is <a href=https://creativecommons.org/licenses/by-sa/4.0/>CC-BY-SA 4.0</a>, the <a href=https://github.com/brihadeesh/peregrinator.site>source code</a> for this site is <a href=https://github.com/brihadeesh/peregrinator.site/blob/main/LICENSE>MIT</a></div><div class=subscribe><p><a href=/privacy>privacy</a></p><p><a href=/index.xml>subscribe</a></p></div></footer></body></html>