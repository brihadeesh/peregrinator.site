<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel="shortcut icon" href=https://peregrinator.site/favicon.ico><link rel=stylesheet href=/css/style.min.css><link rel=canonical href=https://peregrinator.site/blog/2025/02/the-sourcehut-builds-dilemma/><title>The Sourcehut builds dilemma</title>
<meta property="og:title" content="The Sourcehut builds dilemma"><meta property="og:type" content="article"><meta property="og:url" content="https://peregrinator.site/blog/2025/02/the-sourcehut-builds-dilemma/"><meta property="og:image" content="/images/avatar.jpg"><meta property="og:description" content><meta property="og:image:alt" content="A silhoutte of a Shaheen falcon"><meta name=fediverse:creator content="@peregrinator@hachyderm.io"><div style=color:transparent><a rel=me href=https://hachyderm.io/@peregrinator></a><a rel=me href=https://lemmy.ml/@peregrinator></a></div><link rel=alternate type=application/rss+xml href=https://peregrinator.site//index.xml title="peregrinator's blog"></head><body><header id=banner><h2><a href=https://peregrinator.site/>peregrinator's blog</a></h2><nav><ul><li><a href=/about/ title="about me">about</a></li><li><a href=/fiction/ title=fiction>fiction</a></li></ul></nav></header><main id=content><article><header id=post-header><h1>The Sourcehut builds dilemma</h1><div><time>15.02.2025</time></div></header><div class=info><p>This article is part of the <a href=/series/blogging-with-emacs>Blogging with Emacs</a> series.</p></div><p>I&rsquo;ve been deploying this blog using Sourcehut builds from my Sourcehut
repo for some time now but I&rsquo;ve started to have doubts about whether I
want to stick to this given the <a href=https://srht.site/limitations>limitations</a> on Sourcehut pages. I&rsquo;ve
not had to thing about this a lot until recently since I also switched
up my Hugo theme to <a href=https://github.com/jpanther/congo>Congo</a>, which has a few additional features. These
in turn inspired me to incorporate comments from Bluesky too but this
didn&rsquo;t work on the version of this site deployed from my <a href=https://git.sr.ht/~peregrinator/peregrinator.site>Sourcehut
repo</a>. I&rsquo;ve anyway been working on other things on the blog so I
decided to fix this and rearrange how I present the blog a little
while at it.</p><p>So now the blog is split into two parts: the main blog, of which you
can see articles like this one, and the <a href=https://emacs.peregrinator.site/>Emacs blog</a> on a
subdomain. This part of the blog is hosted on my Github and deploys
with Github Pages to allow Bluesky comments adopted from <a href=https://kau.sh/blog/bluesky-comments-for-hugo/>Kaushik
Gopal&rsquo;s blog post</a>.</p><h2 id=comments-from-bluesky>Comments from Bluesky</h2><p>It has a very basic setup. There is a <a href=https://github.com/brihadeesh/peregrinator.site/blob/main/layouts/partials/comments.html><code>comments.html</code></a> partial in
<code>~/layouts/partials/</code> that basically just references a JavaScript script
at <code>~/assets/js/bsky-comments.js</code>. The comments partial is as displayed
below. It is a very basic HTML script with Tailwind CSS built in.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>div</span>
</span></span><span class=line><span class=cl>  <span class=na>id</span><span class=o>=</span><span class=s>&#34;comments-bsky&#34;</span>
</span></span><span class=line><span class=cl>  <span class=na>data-bsky-uri</span><span class=o>=</span><span class=s>&#34;{{ .Params.bsky }}&#34;</span>
</span></span><span class=line><span class=cl>  <span class=na>class</span><span class=o>=</span><span class=s>&#34;group-dark:hover:text-primary-400 transition-colors group-hover:text-primary-600&#34;</span>
</span></span><span class=line><span class=cl><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>div</span> <span class=na>id</span><span class=o>=</span><span class=s>&#34;comment-post&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>h2</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;comment-post-header font-semibold&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      Comments via Bluesky
</span></span><span class=line><span class=cl>    <span class=p>&lt;/</span><span class=nt>h2</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;comment-post-meta text-sm&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>a</span>
</span></span><span class=line><span class=cl>        <span class=na>class</span><span class=o>=</span><span class=s>&#34;comment-post-meta-actions text-neutral-700 transition-transform hover:-translate-x-[2px] hover:text-primary-600 dark:text-neutral dark:hover:text-primary-400&#34;</span>
</span></span><span class=line><span class=cl>        <span class=na>href</span><span class=o>=</span><span class=s>&#34;#&#34;</span>
</span></span><span class=line><span class=cl>        <span class=na>target</span><span class=o>=</span><span class=s>&#34;_blank&#34;</span>
</span></span><span class=line><span class=cl>      <span class=p>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;</span><span class=nt>span</span> <span class=na>id</span><span class=o>=</span><span class=s>&#34;likeCount&#34;</span><span class=p>&gt;</span>0<span class=p>&lt;/</span><span class=nt>span</span><span class=p>&gt;</span> likes |
</span></span><span class=line><span class=cl>        <span class=p>&lt;</span><span class=nt>span</span> <span class=na>id</span><span class=o>=</span><span class=s>&#34;repostCount&#34;</span><span class=p>&gt;</span>0<span class=p>&lt;/</span><span class=nt>span</span><span class=p>&gt;</span> reposts |
</span></span><span class=line><span class=cl>        <span class=p>&lt;</span><span class=nt>span</span> <span class=na>id</span><span class=o>=</span><span class=s>&#34;replyCount&#34;</span><span class=p>&gt;</span>0<span class=p>&lt;/</span><span class=nt>span</span><span class=p>&gt;</span> replies
</span></span><span class=line><span class=cl>      <span class=p>&lt;/</span><span class=nt>a</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>p</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;block&#34;</span><span class=p>&gt;</span>Join the conversation on
</span></span><span class=line><span class=cl>        <span class=p>&lt;</span><span class=nt>a</span>
</span></span><span class=line><span class=cl>          <span class=na>id</span><span class=o>=</span><span class=s>&#34;comment-post-meta-reply&#34;</span>
</span></span><span class=line><span class=cl>          <span class=na>class</span><span class=o>=</span><span class=s>&#34;font-semibold text-neutral-700 transition-transform hover:-translate-x-[2px] hover:text-primary-600 dark:text-neutral dark:hover:text-primary-400 hover:underline hover:decoration-primary-500&#34;</span>
</span></span><span class=line><span class=cl>          <span class=na>href</span><span class=o>=</span><span class=s>&#34;#&#34;</span>
</span></span><span class=line><span class=cl>          <span class=na>target</span><span class=o>=</span><span class=s>&#34;_blank&#34;</span>
</span></span><span class=line><span class=cl>          <span class=p>&gt;</span>Bluesky<span class=p>&lt;/</span><span class=nt>a</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;/</span><span class=nt>p</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>div</span> <span class=na>id</span><span class=o>=</span><span class=s>&#34;comments-container&#34;</span><span class=p>&gt;&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>template</span> <span class=na>id</span><span class=o>=</span><span class=s>&#34;comment-template&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;comment flex items-start space-x-2 m-20 my-10&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;avatar pt-2 w-[50px] h-[50px] flex-none&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;</span><span class=nt>a</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;avatar-link w-full&#34;</span> <span class=na>href</span><span class=o>=</span><span class=s>&#34;&#34;</span> <span class=na>target</span><span class=o>=</span><span class=s>&#34;_blank&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>          <span class=p>&lt;</span><span class=nt>img</span>
</span></span><span class=line><span class=cl>            <span class=na>class</span><span class=o>=</span><span class=s>&#34;avatar-img rounded-full overflow-hidden w-[50px] h-[50px] object-cover&#34;</span>
</span></span><span class=line><span class=cl>            <span class=na>src</span><span class=o>=</span><span class=s>&#34;&#34;</span>
</span></span><span class=line><span class=cl>            <span class=na>alt</span><span class=o>=</span><span class=s>&#34;avatar&#34;</span>
</span></span><span class=line><span class=cl>          <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;/</span><span class=nt>a</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;comment-body text-sm m-20 p-10&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;</span><span class=nt>a</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;author-link font-semibold text-neutral-700 transition-transform hover:-translate-x-[2px] hover:text-primary-600 dark:text-neutral dark:hover:text-primary-400 hover:underline hover:decoration-primary-500&#34;</span> <span class=na>href</span><span class=o>=</span><span class=s>&#34;#&#34;</span> <span class=na>target</span><span class=o>=</span><span class=s>&#34;_blank&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>          <span class=p>&lt;</span><span class=nt>span</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;author-name&#34;</span> <span class=na>title</span><span class=o>=</span><span class=s>&#34;&#34;</span><span class=p>&gt;&lt;/</span><span class=nt>span</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;/</span><span class=nt>a</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=p>&lt;</span><span class=nt>p</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;comment-text text-primary&#34;</span><span class=p>&gt;&lt;/</span><span class=nt>p</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;comment-actions text-xs text-neutral-500 transition-transform hover:-translate-x-[2px] hover:text-primary-600 dark:text-neutral dark:hover:text-primary-400&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>          <span class=p>&lt;</span><span class=nt>a</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;actions-link&#34;</span> <span class=na>href</span><span class=o>=</span><span class=s>&#34;#&#34;</span> <span class=na>target</span><span class=o>=</span><span class=s>&#34;_blank&#34;</span><span class=p>&gt;&lt;/</span><span class=nt>a</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;/</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>{{ $comments := resources.Get &#34;js/bsky-comments.js&#34; }}
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span> <span class=na>src</span><span class=o>=</span><span class=s>&#34;{{ $comments.RelPermalink }}&#34;</span><span class=p>&gt;&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span></code></pre></div><p>It has a very simple working principle. It gathers comments using the
JS script from a regular Bluesky post that references the article at
hand, the link to which is provided in the Org metadata for the
article as</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>:</span><span class=l>bsky &#34;https://bsky.app/profile/peregrinator.site/post/3li7fx3v4m22d&#34;</span><span class=w>
</span></span></span></code></pre></div><p>for example for this page.</p><p>The <a href=https://github.com/brihadeesh/peregrinator.site/blob/main/assets/js/bsky-comments.js><code>bsky-comments.js</code></a> script is a little longer so I won&rsquo;t be
displaying it here. It is more or less unmodified from that provided
on Kaushik Gopal&rsquo;s Github.</p><p>The comments partial is called from the <a href=https://github.com/brihadeesh/peregrinator.site/blob/main/layouts/_default/single.html><code>single.html</code></a> template in
<code>~/layouts/_default</code>.</p><h2 id=other-changes-and-those-planned>Other changes, and those planned</h2><p>I&rsquo;ve updated my <a href=/about/>about page</a> with a little more about myself and my
publications. There are now photos of Goose, my cat, too. I am
considering putting up a gallery of some of my photos on this
site. Perhaps as a subdomain like with my Emacs blog. There&rsquo;s
hopefully a lot more to come!</p><figure><img src=/images/bougainvillea_night.jpg alt="a blooming Bougainvillea tree at night"><figcaption><p>A blooming bougainvillea tree at night. Photo by Brihadeesh S, April 2023</p></figcaption></figure><p>In other news, I&rsquo;ve moved to a new theme for the blog. I now use a
fully personalised version of the <a href=https://github.com/jpanther/congo>Congo</a> theme. So now there&rsquo;s an
optional dark theme too. The blog also uses a new typeface: <a href=https://github.com/samvk/monorale-raleway-sober>Monorale</a>,
a font based on <a href=https://github.com/impallari/Raleway>Raleway</a>. I find it a lot more comfortable for reading
online.</p><br></article><section class=comments><h4>Join the conversation on
<a href=https://bsky.app/profile/peregrinator.site/post/3li7fx3v4m22d target=_blank>Bluesky</a>
or
post a comment to my <a href="mailto:~peregrinator/public_inbox@lists.sr.ht?subject=Re%3a%20The%20Sourcehut%20builds%20dilemma">public inbox</a></h4><br></section><section><div><hr class="border-dotted border-neutral-300 dark:border-neutral-600"><section class=webring><h3>Articles from blogs I read</h3><small>Generated with
<a class=font-semibold href=https://git.sr.ht/~sircmpwn/openring>openring</a></small><section class=articles><div class=article><h4 class=title><a class=font-semibold href=https://www.sleepingvillagereviews.com/reviews--premieres/negative-bliss-lovesong-mini-review target=_blank rel=noopener>NEGATIVE BLISS - Lovesong (Mini-Review)</a></h4><p class=summary>In a continuing attempt to cover more music that would all-too-oft slip through the very large cracks, we slumbering scribes are making an effort to publish short reviews at a greater frequency, thereby shining our very small spotlight on more cool shit. …</p><small>via <a href=https://www.sleepingvillagereviews.com/reviews--premieres>Sleeping Village Reviews - REVIEWS & PREMIERES</a><br><time datetime="2025-03-08 16:08:34 +0000 GMT">08.03.2025</time></small></div><div class=article><h4 class=title><a class=font-semibold href="https://noobheavy.com/album-review-ingrown-idaho/?utm_source=rss&amp;utm_medium=rss&amp;utm_campaign=album-review-ingrown-idaho" target=_blank rel=noopener>Album Review: Ingrown – “Idaho” (Metallic Hardcore)</a></h4><p class=summary>Written by Ellis Ingrown – Idaho> Metallic hardcore> Idaho, US> Releasing March 7> Closed Casket Activities Right, this album throws together a load of the meanest bits of hardcore, thrash, death metal and powerviolence and [...]
The post Album…</p><small>via <a href=https://noobheavy.com/>Noob Heavy</a><br><time datetime="2025-03-06 22:19:52 +0000 +0000">06.03.2025</time></small></div><div class=article><h4 class=title><a class=font-semibold href=https://ambikamath.com/2025/03/05/six-days-to-launch/ target=_blank rel=noopener>Six Days to Launch!</a></h4><p class=summary>Feminism in the Wild will be on sale in SIX DAYS! I can’t believe it. People I’ve never met or interacted with have already been reading this book that, until now, has felt so closely held in my own circles and communities. Soon, there’ll hopefully be man…</p><small>via <a href=https://ambikamath.com>Ambika Kamath</a><br><time datetime="2025-03-05 14:48:56 +0000 +0000">05.03.2025</time></small></div></section></section><br><hr></div></section></main><footer id=social><nav><ul><li><a href=https://emacs.peregrinator.site title=Emacs>emacs</a></li><li><a href=https://bsky.app/profile/peregrinator.site title>Bluesky</a></li><li><a href=https://lists.sr.ht/~peregrinator/public_inbox title>public inbox</a></li><li><a href=https://git.sr.ht/~peregrinator title>Sourcehut</a></li><li><a href=https://www.buymeacoffee.com/peregrinator title>buymeacoffee</a></li></ul></nav></footer><footer id=footer><div class=copyright>The content for this site is <a href=https://creativecommons.org/licenses/by-sa/4.0/>CC-BY-SA 4.0</a>, the <a href=https://github.com/brihadeesh/peregrinator.site>source code</a> for this site is <a href=https://github.com/brihadeesh/peregrinator.site/blob/main/LICENSE>MIT</a></div><div class=subscribe><p><a href=/privacy>privacy</a></p><p><a href=/index.xml>subscribe</a></p></div></footer></body></html>